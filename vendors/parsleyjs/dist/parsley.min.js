var _slice=Array.prototype.slice;function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],e):t.parsley=e(t.jQuery)}(this,function(d){"use strict";var i,t=1,e={},o={attr:function(t,e,i){var r,s,n,a=new RegExp("^"+e,"i");if(void 0===i)i={};else for(r in i)i.hasOwnProperty(r)&&delete i[r];if(void 0===t||void 0===t[0])return i;for(r=(n=t[0].attributes).length;r--;)(s=n[r])&&s.specified&&a.test(s.name)&&(i[this.camelize(s.name.slice(e.length))]=this.deserializeValue(s.value));return i},checkAttr:function(t,e,i){return t.is("["+e+i+"]")},setAttr:function(t,e,i,r){t[0].setAttribute(this.dasherize(e+i),String(r))},generateID:function(){return""+t++},deserializeValue:function(e){var t;try{return e?"true"==e||"false"!=e&&("null"==e?null:isNaN(t=Number(e))?/^[\[\{]/.test(e)?d.parseJSON(e):e:t):e}catch(t){return e}},camelize:function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},dasherize:function(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},warn:function(){var t;window.console&&"function"==typeof window.console.warn&&(t=window.console).warn.apply(t,arguments)},warnOnce:function(t){e[t]||(e[t]=!0,this.warn.apply(this,arguments))},_resetWarnings:function(){e={}},trimString:function(t){return t.replace(/^\s+|\s+$/g,"")},namespaceEvents:function(t,e){return(t=this.trimString(t||"").split(/\s+/))[0]?d.map(t,function(t){return t+"."+e}).join(" "):""},objectCreate:Object.create||(i=function(){},function(t){if(1<arguments.length)throw Error("Second argument not supported");if("object"!=typeof t)throw TypeError("Argument must be an object");i.prototype=t;var e=new i;return i.prototype=null,e})},r={namespace:"data-parsley-",inputs:"input, textarea, select",excluded:"input[type=button], input[type=submit], input[type=reset], input[type=hidden]",priorityEnabled:!0,multiple:null,group:null,uiEnabled:!0,validationThreshold:3,focus:"first",trigger:!1,triggerAfterFailure:"input",errorClass:"parsley-error",successClass:"parsley-success",classHandler:function(t){},errorsContainer:function(t){},errorsWrapper:'<ul class="parsley-errors-list"></ul>',errorTemplate:"<li></li>"},s=function(){this.__id__=o.generateID()};s.prototype={asyncSupport:!0,_pipeAccordingToValidationResult:function(){var e=this,t=function(){var t=d.Deferred();return!0!==e.validationResult&&t.reject(),t.resolve().promise()};return[t,t]},actualizeOptions:function(){return o.attr(this.$element,this.options.namespace,this.domOptions),this.parent&&this.parent.actualizeOptions&&this.parent.actualizeOptions(),this},_resetOptions:function(t){for(var e in this.domOptions=o.objectCreate(this.parent.options),this.options=o.objectCreate(this.domOptions),t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);this.actualizeOptions()},_listeners:null,on:function(t,e){return this._listeners=this._listeners||{},(this._listeners[t]=this._listeners[t]||[]).push(e),this},subscribe:function(t,e){d.listenTo(this,t.toLowerCase(),e)},off:function(t,e){var i=this._listeners&&this._listeners[t];if(i)if(e)for(var r=i.length;r--;)i[r]===e&&i.splice(r,1);else delete this._listeners[t];return this},unsubscribe:function(t,e){d.unsubscribeTo(this,t.toLowerCase())},trigger:function(t,e,i){e=e||this;var r,s=this._listeners&&this._listeners[t];if(s)for(var n=s.length;n--;)if(!1===(r=s[n].call(e,e,i)))return r;return!this.parent||this.parent.trigger(t,e,i)},reset:function(){if("ParsleyForm"!==this.__class__)return this._resetUI(),this._trigger("reset");for(var t=0;t<this.fields.length;t++)this.fields[t].reset();this._trigger("reset")},destroy:function(){if(this._destroyUI(),"ParsleyForm"!==this.__class__)return this.$element.removeData("Parsley"),this.$element.removeData("ParsleyFieldMultiple"),void this._trigger("destroy");for(var t=0;t<this.fields.length;t++)this.fields[t].destroy();this.$element.removeData("Parsley"),this._trigger("destroy")},asyncIsValid:function(t,e){return o.warnOnce("asyncIsValid is deprecated; please use whenValid instead"),this.whenValid({group:t,force:e})},_findRelated:function(){return this.options.multiple?this.parent.$element.find("["+this.options.namespace+'multiple="'+this.options.multiple+'"]'):this.$element}};var n={string:function(t){return t},integer:function(t){if(isNaN(t))throw'Requirement is not an integer: "'+t+'"';return parseInt(t,10)},number:function(t){if(isNaN(t))throw'Requirement is not a number: "'+t+'"';return parseFloat(t)},reference:function(t){var e=d(t);if(0===e.length)throw'No such reference: "'+t+'"';return e},boolean:function(t){return"false"!==t},object:function(t){return o.deserializeValue(t)},regexp:function(t){var e="";return/^\/.*\/(?:[gimy]*)$/.test(t)?(e=t.replace(/.*\/([gimy]*)$/,"$1"),t=t.replace(new RegExp("^/(.*?)/"+e+"$"),"$1")):t="^"+t+"$",new RegExp(t,e)}},l=function(t,e){var i=n[t||"string"];if(!i)throw'Unknown requirement specification: "'+t+'"';return i(e)},u=function(t){d.extend(!0,this,t)};u.prototype={validate:function(t,e){if(this.fn)return 3<arguments.length&&(e=[].slice.call(arguments,1,-1)),this.fn.call(this,t,e);if(d.isArray(t)){if(!this.validateMultiple)throw"Validator `"+this.name+"` does not handle multiple values";return this.validateMultiple.apply(this,arguments)}if(this.validateNumber)return!isNaN(t)&&(arguments[0]=parseFloat(t),this.validateNumber.apply(this,arguments));if(this.validateString)return this.validateString.apply(this,arguments);throw"Validator `"+this.name+"` only handles multiple values"},parseRequirements:function(t,e){if("string"!=typeof t)return d.isArray(t)?t:[t];var i=this.requirementType;if(d.isArray(i)){for(var r=function(t,e){var i=t.match(/^\s*\[(.*)\]\s*$/);if(!i)throw'Requirement is not an array: "'+t+'"';var r=i[1].split(",").map(o.trimString);if(r.length!==e)throw"Requirement has "+r.length+" values when "+e+" are needed";return r}(t,i.length),s=0;s<r.length;s++)r[s]=l(i[s],r[s]);return r}return d.isPlainObject(i)?function(t,e,i){var r=null,s={};for(var n in t)if(n){var a=i(n);"string"==typeof a&&(a=l(t[n],a)),s[n]=a}else r=l(t[n],e);return[r,s]}(i,t,e):[l(i,t)]},requirementType:"string",priority:2};var a=function(t,e){this.__class__="ParsleyValidatorRegistry",this.locale="en",this.init(t||{},e||{})},p={email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,number:/^-?(\d*\.)?\d+(e[-+]?\d+)?$/i,integer:/^-?\d+$/,digits:/^\d+$/,alphanum:/^\w+$/i,url:new RegExp("^(?:(?:https?|ftp)://)?(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?$","i")};p.range=p.number;var c=function(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0};a.prototype={init:function(t,e){for(var i in this.catalog=e,this.validators=d.extend({},this.validators),t)this.addValidator(i,t[i].fn,t[i].priority);window.Parsley.trigger("parsley:validator:init")},setLocale:function(t){if(void 0===this.catalog[t])throw new Error(t+" is not available in the catalog");return this.locale=t,this},addCatalog:function(t,e,i){return"object"==typeof e&&(this.catalog[t]=e),!0===i?this.setLocale(t):this},addMessage:function(t,e,i){return void 0===this.catalog[t]&&(this.catalog[t]={}),this.catalog[t][e]=i,this},addMessages:function(t,e){for(var i in e)this.addMessage(t,i,e[i]);return this},addValidator:function(t,e,i){if(this.validators[t])o.warn('Validator "'+t+'" is already defined.');else if(r.hasOwnProperty(t))return void o.warn('"'+t+'" is a restricted keyword and is not a valid validator name.');return this._setValidator.apply(this,arguments)},updateValidator:function(t,e,i){return this.validators[t]?this._setValidator.apply(this,arguments):(o.warn('Validator "'+t+'" is not already defined.'),this.addValidator.apply(this,arguments))},removeValidator:function(t){return this.validators[t]||o.warn('Validator "'+t+'" is not defined.'),delete this.validators[t],this},_setValidator:function(t,e,i){for(var r in"object"!=typeof e&&(e={fn:e,priority:i}),e.validate||(e=new u(e)),(this.validators[t]=e).messages||{})this.addMessage(r,t,e.messages[r]);return this},getErrorMessage:function(t){var e;"type"===t.name?e=(this.catalog[this.locale][t.name]||{})[t.requirements]:e=this.formatMessage(this.catalog[this.locale][t.name],t.requirements);return e||this.catalog[this.locale].defaultMessage||this.catalog.en.defaultMessage},formatMessage:function(t,e){if("object"==typeof e){for(var i in e)t=this.formatMessage(t,e[i]);return t}return"string"==typeof t?t.replace(/%s/i,e):""},validators:{notblank:{validateString:function(t){return/\S/.test(t)},priority:2},required:{validateMultiple:function(t){return 0<t.length},validateString:function(t){return/\S/.test(t)},priority:512},type:{validateString:function(t,e){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=i.step,s=void 0===r?"1":r,n=i.base,a=void 0===n?0:n,o=p[e];if(!o)throw new Error("validator type `"+e+"` is not supported");if(!o.test(t))return!1;if("number"===e&&!/^any$/i.test(s||"")){var l=Number(t),u=Math.max(c(s),c(a));if(c(l)>u)return!1;var h=function(t){return Math.round(t*Math.pow(10,u))};if((h(l)-h(a))%h(s)!=0)return!1}return!0},requirementType:{"":"string",step:"string",base:"number"},priority:256},pattern:{validateString:function(t,e){return e.test(t)},requirementType:"regexp",priority:64},minlength:{validateString:function(t,e){return t.length>=e},requirementType:"integer",priority:30},maxlength:{validateString:function(t,e){return t.length<=e},requirementType:"integer",priority:30},length:{validateString:function(t,e,i){return t.length>=e&&t.length<=i},requirementType:["integer","integer"],priority:30},mincheck:{validateMultiple:function(t,e){return t.length>=e},requirementType:"integer",priority:30},maxcheck:{validateMultiple:function(t,e){return t.length<=e},requirementType:"integer",priority:30},check:{validateMultiple:function(t,e,i){return t.length>=e&&t.length<=i},requirementType:["integer","integer"],priority:30},min:{validateNumber:function(t,e){return e<=t},requirementType:"number",priority:30},max:{validateNumber:function(t,e){return t<=e},requirementType:"number",priority:30},range:{validateNumber:function(t,e,i){return e<=t&&t<=i},requirementType:["number","number"],priority:30},equalto:{validateString:function(t,e){var i=d(e);return i.length?t===i.val():t===e},priority:256}}};var h={};h.Form={_actualizeTriggers:function(){var e=this;this.$element.on("submit.Parsley",function(t){e.onSubmitValidate(t)}),this.$element.on("click.Parsley",'input[type="submit"], button[type="submit"]',function(t){e.onSubmitButton(t)}),!1!==this.options.uiEnabled&&this.$element.attr("novalidate","")},focus:function(){if(!(this._focusedField=null)===this.validationResult||"none"===this.options.focus)return null;for(var t=0;t<this.fields.length;t++){var e=this.fields[t];if(!0!==e.validationResult&&0<e.validationResult.length&&void 0===e.options.noFocus&&(this._focusedField=e.$element,"first"===this.options.focus))break}return null===this._focusedField?null:this._focusedField.focus()},_destroyUI:function(){this.$element.off(".Parsley")}},h.Field={_reflowUI:function(){if(this._buildUI(),this._ui){var t=function t(e,i,r){for(var s=[],n=[],a=0;a<e.length;a++){for(var o=!1,l=0;l<i.length;l++)if(e[a].assert.name===i[l].assert.name){o=!0;break}o?n.push(e[a]):s.push(e[a])}return{kept:n,added:s,removed:r?[]:t(i,e,!0).added}}(this.validationResult,this._ui.lastValidationResult);this._ui.lastValidationResult=this.validationResult,this._manageStatusClass(),this._manageErrorsMessages(t),this._actualizeTriggers(),!t.kept.length&&!t.added.length||this._failedOnce||(this._failedOnce=!0,this._actualizeTriggers())}},getErrorsMessages:function(){if(!0===this.validationResult)return[];for(var t=[],e=0;e<this.validationResult.length;e++)t.push(this.validationResult[e].errorMessage||this._getErrorMessage(this.validationResult[e].assert));return t},addError:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=e.message,r=e.assert,s=e.updateClass,n=void 0===s||s;this._buildUI(),this._addError(t,{message:i,assert:r}),n&&this._errorClass()},updateError:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=e.message,r=e.assert,s=e.updateClass,n=void 0===s||s;this._buildUI(),this._updateError(t,{message:i,assert:r}),n&&this._errorClass()},removeError:function(t){var e=(arguments.length<=1||void 0===arguments[1]?{}:arguments[1]).updateClass,i=void 0===e||e;this._buildUI(),this._removeError(t),i&&this._manageStatusClass()},_manageStatusClass:function(){this.hasConstraints()&&this.needsValidation()&&!0===this.validationResult?this._successClass():0<this.validationResult.length?this._errorClass():this._resetClass()},_manageErrorsMessages:function(t){if(void 0===this.options.errorsMessagesDisabled){if(void 0!==this.options.errorMessage)return t.added.length||t.kept.length?(this._insertErrorWrapper(),0===this._ui.$errorsWrapper.find(".parsley-custom-error-message").length&&this._ui.$errorsWrapper.append(d(this.options.errorTemplate).addClass("parsley-custom-error-message")),this._ui.$errorsWrapper.addClass("filled").find(".parsley-custom-error-message").html(this.options.errorMessage)):this._ui.$errorsWrapper.removeClass("filled").find(".parsley-custom-error-message").remove();for(var e=0;e<t.removed.length;e++)this._removeError(t.removed[e].assert.name);for(e=0;e<t.added.length;e++)this._addError(t.added[e].assert.name,{message:t.added[e].errorMessage,assert:t.added[e].assert});for(e=0;e<t.kept.length;e++)this._updateError(t.kept[e].assert.name,{message:t.kept[e].errorMessage,assert:t.kept[e].assert})}},_addError:function(t,e){var i=e.message,r=e.assert;this._insertErrorWrapper(),this._ui.$errorsWrapper.addClass("filled").append(d(this.options.errorTemplate).addClass("parsley-"+t).html(i||this._getErrorMessage(r)))},_updateError:function(t,e){var i=e.message,r=e.assert;this._ui.$errorsWrapper.addClass("filled").find(".parsley-"+t).html(i||this._getErrorMessage(r))},_removeError:function(t){this._ui.$errorsWrapper.removeClass("filled").find(".parsley-"+t).remove()},_getErrorMessage:function(t){var e=t.name+"Message";return void 0!==this.options[e]?window.Parsley.formatMessage(this.options[e],t.requirements):window.Parsley.getErrorMessage(t)},_buildUI:function(){if(!this._ui&&!1!==this.options.uiEnabled){var t={};this.$element.attr(this.options.namespace+"id",this.__id__),t.$errorClassHandler=this._manageClassHandler(),t.errorsWrapperId="parsley-id-"+(this.options.multiple?"multiple-"+this.options.multiple:this.__id__),t.$errorsWrapper=d(this.options.errorsWrapper).attr("id",t.errorsWrapperId),t.lastValidationResult=[],t.validationInformationVisible=!1,this._ui=t}},_manageClassHandler:function(){if("string"==typeof this.options.classHandler&&d(this.options.classHandler).length)return d(this.options.classHandler);var t=this.options.classHandler.call(this,this);return void 0!==t&&t.length?t:!this.options.multiple||this.$element.is("select")?this.$element:this.$element.parent()},_insertErrorWrapper:function(){var t;if(0!==this._ui.$errorsWrapper.parent().length)return this._ui.$errorsWrapper.parent();if("string"==typeof this.options.errorsContainer){if(d(this.options.errorsContainer).length)return d(this.options.errorsContainer).append(this._ui.$errorsWrapper);o.warn("The errors container `"+this.options.errorsContainer+"` does not exist in DOM")}else"function"==typeof this.options.errorsContainer&&(t=this.options.errorsContainer.call(this,this));if(void 0!==t&&t.length)return t.append(this._ui.$errorsWrapper);var e=this.$element;return this.options.multiple&&(e=e.parent()),e.after(this._ui.$errorsWrapper)},_actualizeTriggers:function(){var t,e=this,i=this._findRelated();i.off(".Parsley"),this._failedOnce?i.on(o.namespaceEvents(this.options.triggerAfterFailure,"Parsley"),function(){e.validate()}):(t=o.namespaceEvents(this.options.trigger,"Parsley"))&&i.on(t,function(t){e._eventValidate(t)})},_eventValidate:function(t){!(!/key|input/.test(t.type)||this._ui&&this._ui.validationInformationVisible)&&this.getValue().length<=this.options.validationThreshold||this.validate()},_resetUI:function(){this._failedOnce=!1,this._actualizeTriggers(),void 0!==this._ui&&(this._ui.$errorsWrapper.removeClass("filled").children().remove(),this._resetClass(),this._ui.lastValidationResult=[],this._ui.validationInformationVisible=!1)},_destroyUI:function(){this._resetUI(),void 0!==this._ui&&this._ui.$errorsWrapper.remove(),delete this._ui},_successClass:function(){this._ui.validationInformationVisible=!0,this._ui.$errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass)},_errorClass:function(){this._ui.validationInformationVisible=!0,this._ui.$errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass)},_resetClass:function(){this._ui.$errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass)}};var f=function(t,e,i){this.__class__="ParsleyForm",this.$element=d(t),this.domOptions=e,this.options=i,this.parent=window.Parsley,this.fields=[],this.validationResult=null},m={pending:null,resolved:!0,rejected:!1};f.prototype={onSubmitValidate:function(t){var e=this;if(!0!==t.parsley){var i=this._$submitSource||this.$element.find('input[type="submit"], button[type="submit"]').first();if(this._$submitSource=null,this.$element.find(".parsley-synthetic-submit-button").prop("disabled",!0),!i.is("[formnovalidate]")){var r=this.whenValidate({event:t});"resolved"===r.state()&&!1!==this._trigger("submit")||(t.stopImmediatePropagation(),t.preventDefault(),"pending"===r.state()&&r.done(function(){e._submit(i)}))}}},onSubmitButton:function(t){this._$submitSource=d(t.target)},_submit:function(t){if(!1!==this._trigger("submit")){if(t){var e=this.$element.find(".parsley-synthetic-submit-button").prop("disabled",!1);0===e.length&&(e=d('<input class="parsley-synthetic-submit-button" type="hidden">').appendTo(this.$element)),e.attr({name:t.attr("name"),value:t.attr("value")})}this.$element.trigger(d.extend(d.Event("submit"),{parsley:!0}))}},validate:function(t){if(1<=arguments.length&&!d.isPlainObject(t)){o.warnOnce("Calling validate on a parsley form without passing arguments as an object is deprecated.");var e=_slice.call(arguments);t={group:e[0],force:e[1],event:e[2]}}return m[this.whenValidate(t).state()]},whenValidate:function(){var t,e=this,i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=i.group,s=i.force,n=i.event;(this.submitEvent=n)&&(this.submitEvent=d.extend({},n,{preventDefault:function(){o.warnOnce("Using `this.submitEvent.preventDefault()` is deprecated; instead, call `this.validationResult = false`"),e.validationResult=!1}})),this.validationResult=!0,this._trigger("validate"),this._refreshFields();var a=this._withoutReactualizingFormOptions(function(){return d.map(e.fields,function(t){return t.whenValidate({force:s,group:r})})});return(t=d.when.apply(d,_toConsumableArray(a)).done(function(){e._trigger("success")}).fail(function(){e.validationResult=!1,e.focus(),e._trigger("error")}).always(function(){e._trigger("validated")})).pipe.apply(t,_toConsumableArray(this._pipeAccordingToValidationResult()))},isValid:function(t){if(1<=arguments.length&&!d.isPlainObject(t)){o.warnOnce("Calling isValid on a parsley form without passing arguments as an object is deprecated.");var e=_slice.call(arguments);t={group:e[0],force:e[1]}}return m[this.whenValid(t).state()]},whenValid:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=e.group,r=e.force;this._refreshFields();var s=this._withoutReactualizingFormOptions(function(){return d.map(t.fields,function(t){return t.whenValid({group:i,force:r})})});return d.when.apply(d,_toConsumableArray(s))},_refreshFields:function(){return this.actualizeOptions()._bindFields()},_bindFields:function(){var r=this,t=this.fields;return this.fields=[],this.fieldsMappedById={},this._withoutReactualizingFormOptions(function(){r.$element.find(r.options.inputs).not(r.options.excluded).each(function(t,e){var i=new window.Parsley.Factory(e,{},r);"ParsleyField"!==i.__class__&&"ParsleyFieldMultiple"!==i.__class__||!0===i.options.excluded||void 0===r.fieldsMappedById[i.__class__+"-"+i.__id__]&&(r.fieldsMappedById[i.__class__+"-"+i.__id__]=i,r.fields.push(i))}),d(t).not(r.fields).each(function(t,e){e._trigger("reset")})}),this},_withoutReactualizingFormOptions:function(t){var e=this.actualizeOptions;this.actualizeOptions=function(){return this};var i=t();return this.actualizeOptions=e,i},_trigger:function(t){return this.trigger("form:"+t)}};var v=function(t,e,i,r,s){if(!/ParsleyField/.test(t.__class__))throw new Error("ParsleyField or ParsleyFieldMultiple instance expected");var n=window.Parsley._validatorRegistry.validators[e],a=new u(n);d.extend(this,{validator:a,name:e,requirements:i,priority:r||t.options[e+"Priority"]||a.priority,isDomConstraint:!0===s}),this._parseRequirements(t.options)},g=function(t,e,i,r){this.__class__="ParsleyField",this.$element=d(t),void 0!==r&&(this.parent=r),this.options=i,this.domOptions=e,this.constraints=[],this.constraintsByName={},this.validationResult=!0,this._bindConstraints()},y={pending:null,resolved:!0,rejected:!(v.prototype={validate:function(t,e){var i;return(i=this.validator).validate.apply(i,[t].concat(_toConsumableArray(this.requirementList),[e]))},_parseRequirements:function(i){var r=this;this.requirementList=this.validator.parseRequirements(this.requirements,function(t){return i[r.name+(e=t,e[0].toUpperCase()+e.slice(1))];var e})}})};g.prototype={validate:function(t){1<=arguments.length&&!d.isPlainObject(t)&&(o.warnOnce("Calling validate on a parsley field without passing arguments as an object is deprecated."),t={options:t});var e=this.whenValidate(t);if(!e)return!0;switch(e.state()){case"pending":return null;case"resolved":return!0;case"rejected":return this.validationResult}},whenValidate:function(){var t,e=this,i=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=i.force,s=i.group;if(this.refreshConstraints(),!s||this._isInGroup(s))return this.value=this.getValue(),this._trigger("validate"),(t=this.whenValid({force:r,value:this.value,_refreshed:!0}).always(function(){e._reflowUI()}).done(function(){e._trigger("success")}).fail(function(){e._trigger("error")}).always(function(){e._trigger("validated")})).pipe.apply(t,_toConsumableArray(this._pipeAccordingToValidationResult()))},hasConstraints:function(){return 0!==this.constraints.length},needsValidation:function(t){return void 0===t&&(t=this.getValue()),!(!t.length&&!this._isRequired()&&void 0===this.options.validateIfEmpty)},_isInGroup:function(t){return d.isArray(this.options.group)?-1!==d.inArray(t,this.options.group):this.options.group===t},isValid:function(t){if(1<=arguments.length&&!d.isPlainObject(t)){o.warnOnce("Calling isValid on a parsley field without passing arguments as an object is deprecated.");var e=_slice.call(arguments);t={force:e[0],value:e[1]}}var i=this.whenValid(t);return!i||y[i.state()]},whenValid:function(){var r=this,t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=t.force,i=void 0!==e&&e,s=t.value,n=t.group;if(t._refreshed||this.refreshConstraints(),!n||this._isInGroup(n)){if(this.validationResult=!0,!this.hasConstraints())return d.when();if(null==s&&(s=this.getValue()),!this.needsValidation(s)&&!0!==i)return d.when();var a=this._getGroupedConstraints(),o=[];return d.each(a,function(t,e){var i=d.when.apply(d,_toConsumableArray(d.map(e,function(t){return r._validateConstraint(s,t)})));if(o.push(i),"rejected"===i.state())return!1}),d.when.apply(d,o)}},_validateConstraint:function(t,e){var i=this,r=e.validate(t,this);return!1===r&&(r=d.Deferred().reject()),d.when(r).fail(function(t){i.validationResult instanceof Array||(i.validationResult=[]),i.validationResult.push({assert:e,errorMessage:"string"==typeof t&&t})})},getValue:function(){var t;return null==(t="function"==typeof this.options.value?this.options.value(this):void 0!==this.options.value?this.options.value:this.$element.val())?"":this._handleWhitespace(t)},refreshConstraints:function(){return this.actualizeOptions()._bindConstraints()},addConstraint:function(t,e,i,r){if(window.Parsley._validatorRegistry.validators[t]){var s=new v(this,t,e,i,r);"undefined"!==this.constraintsByName[s.name]&&this.removeConstraint(s.name),this.constraints.push(s),this.constraintsByName[s.name]=s}return this},removeConstraint:function(t){for(var e=0;e<this.constraints.length;e++)if(t===this.constraints[e].name){this.constraints.splice(e,1);break}return delete this.constraintsByName[t],this},updateConstraint:function(t,e,i){return this.removeConstraint(t).addConstraint(t,e,i)},_bindConstraints:function(){for(var t=[],e={},i=0;i<this.constraints.length;i++)!1===this.constraints[i].isDomConstraint&&(t.push(this.constraints[i]),e[this.constraints[i].name]=this.constraints[i]);for(var r in this.constraints=t,this.constraintsByName=e,this.options)this.addConstraint(r,this.options[r],void 0,!0);return this._bindHtml5Constraints()},_bindHtml5Constraints:function(){(this.$element.hasClass("required")||this.$element.attr("required"))&&this.addConstraint("required",!0,void 0,!0),"string"==typeof this.$element.attr("pattern")&&this.addConstraint("pattern",this.$element.attr("pattern"),void 0,!0),void 0!==this.$element.attr("min")&&void 0!==this.$element.attr("max")?this.addConstraint("range",[this.$element.attr("min"),this.$element.attr("max")],void 0,!0):void 0!==this.$element.attr("min")?this.addConstraint("min",this.$element.attr("min"),void 0,!0):void 0!==this.$element.attr("max")&&this.addConstraint("max",this.$element.attr("max"),void 0,!0),void 0!==this.$element.attr("minlength")&&void 0!==this.$element.attr("maxlength")?this.addConstraint("length",[this.$element.attr("minlength"),this.$element.attr("maxlength")],void 0,!0):void 0!==this.$element.attr("minlength")?this.addConstraint("minlength",this.$element.attr("minlength"),void 0,!0):void 0!==this.$element.attr("maxlength")&&this.addConstraint("maxlength",this.$element.attr("maxlength"),void 0,!0);var t=this.$element.attr("type");return void 0===t?this:"number"===t?this.addConstraint("type",["number",{step:this.$element.attr("step"),base:this.$element.attr("min")||this.$element.attr("value")}],void 0,!0):/^(email|url|range)$/i.test(t)?this.addConstraint("type",t,void 0,!0):this},_isRequired:function(){return void 0!==this.constraintsByName.required&&!1!==this.constraintsByName.required.requirements},_trigger:function(t){return this.trigger("field:"+t)},_handleWhitespace:function(t){return!0===this.options.trimValue&&o.warnOnce('data-parsley-trim-value="true" is deprecated, please use data-parsley-whitespace="trim"'),"squish"===this.options.whitespace&&(t=t.replace(/\s{2,}/g," ")),"trim"!==this.options.whitespace&&"squish"!==this.options.whitespace&&!0!==this.options.trimValue||(t=o.trimString(t)),t},_getGroupedConstraints:function(){if(!1===this.options.priorityEnabled)return[this.constraints];for(var t=[],e={},i=0;i<this.constraints.length;i++){var r=this.constraints[i].priority;e[r]||t.push(e[r]=[]),e[r].push(this.constraints[i])}return t.sort(function(t,e){return e[0].priority-t[0].priority}),t}};var _=g,w=function(){this.__class__="ParsleyFieldMultiple"};w.prototype={addElement:function(t){return this.$elements.push(t),this},refreshConstraints:function(){var t;if(this.constraints=[],this.$element.is("select"))return this.actualizeOptions()._bindConstraints(),this;for(var e=0;e<this.$elements.length;e++)if(d("html").has(this.$elements[e]).length){t=this.$elements[e].data("ParsleyFieldMultiple").refreshConstraints().constraints;for(var i=0;i<t.length;i++)this.addConstraint(t[i].name,t[i].requirements,t[i].priority,t[i].isDomConstraint)}else this.$elements.splice(e,1);return this},getValue:function(){if("function"==typeof this.options.value)return this.options.value(this);if(void 0!==this.options.value)return this.options.value;if(this.$element.is("input[type=radio]"))return this._findRelated().filter(":checked").val()||"";if(this.$element.is("input[type=checkbox]")){var t=[];return this._findRelated().filter(":checked").each(function(){t.push(d(this).val())}),t}return this.$element.is("select")&&null===this.$element.val()?[]:this.$element.val()},_init:function(){return this.$elements=[this.$element],this}};var b=function(t,e,i){this.$element=d(t);var r=this.$element.data("Parsley");if(r)return void 0!==i&&r.parent===window.Parsley&&(r.parent=i,r._resetOptions(r.options)),r;if(!this.$element.length)throw new Error("You must bind Parsley on an existing element.");if(void 0!==i&&"ParsleyForm"!==i.__class__)throw new Error("Parent instance must be a ParsleyForm instance");return this.parent=i||window.Parsley,this.init(e)};b.prototype={init:function(t){return this.__class__="Parsley",this.__version__="2.3.13",this.__id__=o.generateID(),this._resetOptions(t),this.$element.is("form")||o.checkAttr(this.$element,this.options.namespace,"validate")&&!this.$element.is(this.options.inputs)?this.bind("parsleyForm"):this.isMultiple()?this.handleMultiple():this.bind("parsleyField")},isMultiple:function(){return this.$element.is("input[type=radio], input[type=checkbox]")||this.$element.is("select")&&void 0!==this.$element.attr("multiple")},handleMultiple:function(){var t,e,i=this;if(this.options.multiple||(void 0!==this.$element.attr("name")&&this.$element.attr("name").length?this.options.multiple=t=this.$element.attr("name"):void 0!==this.$element.attr("id")&&this.$element.attr("id").length&&(this.options.multiple=this.$element.attr("id"))),this.$element.is("select")&&void 0!==this.$element.attr("multiple"))return this.options.multiple=this.options.multiple||this.__id__,this.bind("parsleyFieldMultiple");if(!this.options.multiple)return o.warn("To be bound by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.",this.$element),this;this.options.multiple=this.options.multiple.replace(/(:|\.|\[|\]|\{|\}|\$)/g,""),void 0!==t&&d('input[name="'+t+'"]').each(function(t,e){d(e).is("input[type=radio], input[type=checkbox]")&&d(e).attr(i.options.namespace+"multiple",i.options.multiple)});for(var r=this._findRelated(),s=0;s<r.length;s++)if(void 0!==(e=d(r.get(s)).data("Parsley"))){this.$element.data("ParsleyFieldMultiple")||e.addElement(this.$element);break}return this.bind("parsleyField",!0),e||this.bind("parsleyFieldMultiple")},bind:function(t,e){var i;switch(t){case"parsleyForm":i=d.extend(new f(this.$element,this.domOptions,this.options),new s,window.ParsleyExtend)._bindFields();break;case"parsleyField":i=d.extend(new _(this.$element,this.domOptions,this.options,this.parent),new s,window.ParsleyExtend);break;case"parsleyFieldMultiple":i=d.extend(new _(this.$element,this.domOptions,this.options,this.parent),new w,new s,window.ParsleyExtend)._init();break;default:throw new Error(t+"is not a supported Parsley type")}return this.options.multiple&&o.setAttr(this.$element,this.options.namespace,"multiple",this.options.multiple),void 0!==e?this.$element.data("ParsleyFieldMultiple",i):(this.$element.data("Parsley",i),i._actualizeTriggers(),i._trigger("init")),i}};var F=d.fn.jquery.split(".");if(parseInt(F[0])<=1&&parseInt(F[1])<8)throw"The loaded version of jQuery is too old. Please upgrade to 1.8.x or better.";F.forEach||o.warn("Parsley requires ES5 to run properly. Please include https://github.com/es-shims/es5-shim");var C=d.extend(new s,{$element:d(document),actualizeOptions:null,_resetOptions:null,Factory:b,version:"2.3.13"});d.extend(_.prototype,h.Field,s.prototype),d.extend(f.prototype,h.Form,s.prototype),d.extend(b.prototype,s.prototype),d.fn.parsley=d.fn.psly=function(t){if(1<this.length){var e=[];return this.each(function(){e.push(d(this).parsley(t))}),e}if(d(this).length)return new b(this,t);o.warn("You must bind Parsley on an existing element.")},void 0===window.ParsleyExtend&&(window.ParsleyExtend={}),C.options=d.extend(o.objectCreate(r),window.ParsleyConfig),window.ParsleyConfig=C.options,window.Parsley=window.psly=C,window.ParsleyUtils=o;var $=window.Parsley._validatorRegistry=new a(window.ParsleyConfig.validators,window.ParsleyConfig.i18n);window.ParsleyValidator={},d.each("setLocale addCatalog addMessage addMessages getErrorMessage formatMessage addValidator updateValidator removeValidator".split(" "),function(t,e){window.Parsley[e]=d.proxy($,e),window.ParsleyValidator[e]=function(){var t;return o.warnOnce("Accessing the method '"+e+"' through ParsleyValidator is deprecated. Simply call 'window.Parsley."+e+"(...)'"),(t=window.Parsley)[e].apply(t,arguments)}}),window.Parsley.UI=h,window.ParsleyUI={removeError:function(t,e,i){var r=!0!==i;return o.warnOnce("Accessing ParsleyUI is deprecated. Call 'removeError' on the instance directly. Please comment in issue 1073 as to your need to call this method."),t.removeError(e,{updateClass:r})},getErrorsMessages:function(t){return o.warnOnce("Accessing ParsleyUI is deprecated. Call 'getErrorsMessages' on the instance directly."),t.getErrorsMessages()}},d.each("addError updateError".split(" "),function(t,a){window.ParsleyUI[a]=function(t,e,i,r,s){var n=!0!==s;return o.warnOnce("Accessing ParsleyUI is deprecated. Call '"+a+"' on the instance directly. Please comment in issue 1073 as to your need to call this method."),t[a](e,{message:i,assert:r,updateClass:n})}}),!1!==window.ParsleyConfig.autoBind&&d(function(){d("[data-parsley-validate]").length&&d("[data-parsley-validate]").parsley()});var x=d({}),E=function(){o.warnOnce("Parsley's pubsub module is deprecated; use the 'on' and 'off' methods on parsley instances or window.Parsley")};function P(e,i){return e.parsleyAdaptedCallback||(e.parsleyAdaptedCallback=function(){var t=Array.prototype.slice.call(arguments,0);t.unshift(this),e.apply(i||x,t)}),e.parsleyAdaptedCallback}var V="parsley:";function M(t){return 0===t.lastIndexOf(V,0)?t.substr(V.length):t}return d.listen=function(t,e){var i;if(E(),"object"==typeof e&&"function"==typeof arguments[2]&&(i=e,e=arguments[2]),"function"!=typeof e)throw new Error("Wrong parameters");window.Parsley.on(M(t),P(e,i))},d.listenTo=function(t,e,i){if(E(),!(t instanceof _||t instanceof f))throw new Error("Must give Parsley instance");if("string"!=typeof e||"function"!=typeof i)throw new Error("Wrong parameters");t.on(M(e),P(i))},d.unsubscribe=function(t,e){if(E(),"string"!=typeof t||"function"!=typeof e)throw new Error("Wrong arguments");window.Parsley.off(M(t),e.parsleyAdaptedCallback)},d.unsubscribeTo=function(t,e){if(E(),!(t instanceof _||t instanceof f))throw new Error("Must give Parsley instance");t.off(M(e))},d.unsubscribeAll=function(e){E(),window.Parsley.off(M(e)),d("form,input,textarea,select").each(function(){var t=d(this).data("Parsley");t&&t.off(M(e))})},d.emit=function(t,e){var i;E();var r=e instanceof _||e instanceof f,s=Array.prototype.slice.call(arguments,r?2:1);s.unshift(M(t)),r||(e=window.Parsley),(i=e).trigger.apply(i,_toConsumableArray(s))},d.extend(!0,C,{asyncValidators:{default:{fn:function(t){return 200<=t.status&&t.status<300},url:!1},reverse:{fn:function(t){return t.status<200||300<=t.status},url:!1}},addAsyncValidator:function(t,e,i,r){return C.asyncValidators[t]={fn:e,url:i||!1,options:r||{}},this}}),C.addValidator("remote",{requirementType:{"":"string",validator:"string",reverse:"boolean",options:"object"},validateString:function(t,e,i,r){var s,n,a={},o=i.validator||(!0===i.reverse?"reverse":"default");if(void 0===C.asyncValidators[o])throw new Error("Calling an undefined async validator: `"+o+"`");-1<(e=C.asyncValidators[o].url||e).indexOf("{value}")?e=e.replace("{value}",encodeURIComponent(t)):a[r.$element.attr("name")||r.$element.attr("id")]=t;var l=d.extend(!0,i.options||{},C.asyncValidators[o].options);s=d.extend(!0,{},{url:e,data:a,type:"GET"},l),r.trigger("field:ajaxoptions",r,s),n=d.param(s),void 0===C._remoteCache&&(C._remoteCache={});var u=C._remoteCache[n]=C._remoteCache[n]||d.ajax(s),h=function(){var t=C.asyncValidators[o].fn.call(r,u,e,i);return t||(t=d.Deferred().reject()),d.when(t)};return u.then(h,h)},priority:-1}),C.on("form:submit",function(){C._remoteCache={}}),window.ParsleyExtend.addAsyncValidator=function(){return ParsleyUtils.warnOnce("Accessing the method `addAsyncValidator` through an instance is deprecated. Simply call `Parsley.addAsyncValidator(...)`"),C.addAsyncValidator.apply(C,arguments)},C.addMessages("en",{defaultMessage:"This value seems to be invalid.",type:{email:"Insira um email válido.",url:"This value should be a valid url.",number:"This value should be a valid number.",integer:"This value should be a valid integer.",digits:"This value should be digits.",alphanum:"This value should be alphanumeric."},notblank:"This value should not be blank.",required:"Este campo é obrigatório.",pattern:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"Valor muito pequeno. Digite valores maiores que  %s caracteres ou mais.",maxlength:"Esse valor é muito longo. digite valoeres menores que %s caracteres.",length:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or fewer.",check:"You must select between %s and %s choices.",equalto:"This value should be the same."}),C.setLocale("en"),(new function(){var r=this,s=window||global;d.extend(this,{isNativeEvent:function(t){return t.originalEvent&&!1!==t.originalEvent.isTrusted},fakeInputEvent:function(t){r.isNativeEvent(t)&&d(t.target).trigger("input")},misbehaves:function(t){r.isNativeEvent(t)&&(r.behavesOk(t),d(document).on("change.inputevent",t.data.selector,r.fakeInputEvent),r.fakeInputEvent(t))},behavesOk:function(t){r.isNativeEvent(t)&&d(document).off("input.inputevent",t.data.selector,r.behavesOk).off("change.inputevent",t.data.selector,r.misbehaves)},install:function(){if(!s.inputEventPatched){s.inputEventPatched="0.0.3";for(var t=["select",'input[type="checkbox"]','input[type="radio"]','input[type="file"]'],e=0;e<t.length;e++){var i=t[e];d(document).on("input.inputevent",i,{selector:i},r.behavesOk).on("change.inputevent",i,{selector:i},r.misbehaves)}}},uninstall:function(){delete s.inputEventPatched,d(document).off(".inputevent")}})}).install(),C});